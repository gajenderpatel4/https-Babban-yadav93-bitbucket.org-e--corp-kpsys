<div ng-controller="TicketController" data-ng-init="init()">

    <div ng-if="loading" class="row loading-message">
        <div ng-spinner-bar="" class="page-spinner-bar">
            <div class="bounce1"></div>
            <div class="bounce2"></div>
            <div class="bounce3"></div>
        </div>
    </div>

    <div ng-if="!loading" class="tabbable-line">
        <ul class="nav nav-tabs ">
            <li class="active">
                <a href="#" data-target="#tab_1" data-toggle="tab" aria-expanded="false"> Fine </a>
            </li>
            <li class="">
                <a href="#" data-target="#tab_2" data-toggle="tab" aria-expanded="false"> Additional Info </a>
            </li>
            <li class="">
                <a href="#" data-target="#tab_3" data-toggle="tab" aria-expanded="false"> Location </a>
            </li>
            <li class="">
                <a href="#" data-target="#tab_4" data-toggle="tab" aria-expanded="false"> Fine Text </a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="tab_1">
                <div class="row">

                    <div class="col-lg-3 portlet light ">
                        <div class="portlet-title">
                            <div class="caption font-green-sharp">
                                Fine Info
                            </div>
                            <div class="tools">
                                <a href="" class="collapse" data-original-title="" title=""> </a>
                                <a href="" class="fullscreen" data-original-title="" title=""> </a>
                            </div>
                        </div>
                        <div class="portlet-body row fine-info">
                            <div>
                                <ticket-field name="subtidno"></ticket-field>
                                <ticket-field title="Location" apply="ticketLocation"></ticket-field>
                                <ticket-field title="Officer" name="user.username"></ticket-field>
                                <ticket-field name="violation.vltndscr" br></ticket-field>
                                <ticket-field name="subBusiness.business.busnissutmst" format="yyyy.MM.dd"></ticket-field>
                                <ticket-field title="Time" name="subBusiness.business.busnissutmst" format="HH:mm"></ticket-field>
                                <ticket-field name="nmbrplte"></ticket-field>
                                <ticket-field name="country.ctryname"></ticket-field>
                                <ticket-field name="vhclbrndname"></ticket-field>
                                <ticket-field name="vehicleType.vhcltypename"></ticket-field>
                                <ticket-field name="fromtmst" format="yyyy.MM.dd HH:mm"></ticket-field>
                                <ticket-field name="untltmst" format="yyyy.MM.dd HH:mm"></ticket-field>
                                <ticket-field name="checkOutDate" format="yyyy.MM.dd HH:mm"></ticket-field>
                                <ticket-field name="checkInDate" format="yyyy.MM.dd HH:mm"></ticket-field>
                                <ticket-field title="Amount" apply="amount"></ticket-field>
                                <ticket-field name="subBusiness.business.busndueedate"></ticket-field>
                                <ticket-field title="Balance" apply="balance"></ticket-field>
                                <ticket-field name="paymidfc"></ticket-field>
                            </div>
                            <div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8 fade-in-up fine-panes">
                        <div>
                            <div class="portlet light panel-collapse">
                                <div class="portlet-title">
                                    <div class="caption font-green-sharp">
                                        Documents
                                    </div>
                                    <div class="tools">
                                        <a href="" class="collapse" data-original-title="" title=""> </a>
                                        <a href="" class="fullscreen" data-original-title="" title=""> </a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover tickets-table table-sortable">
                                        <thead>
                                        <tr>
                                            <td>Timestamp</td>
                                            <td>Title</td>
                                            <td>Action</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="document in ticket.documents">
                                            <td ng-bind="document.dcmttmst | date:'yyyy-MM-dd HH:mm:ss'"></td>
                                            <td ng-bind="document.dcmtname"></td>
                                            <td>
                                                <button>
                                                    <i class="fa fa-remove"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="portlet light panel-collapse">
                                <div class="portlet-title">
                                    <div class="caption font-green-sharp">
                                        Photos
                                    </div>
                                    <div class="tools">
                                        <a href="" class="collapse" data-original-title="" title=""> </a>
                                        <a href="" class="fullscreen" data-original-title="" title=""> </a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover tickets-table table-sortable">
                                        <thead>
                                        <tr>
                                            <td>Photo</td>
                                            <td>Timestamp</td>
                                            <td>Action</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="photo in ticket.photos">
                                            <td ng-bind="photo.dcmtidno"></td>
                                            <td ng-bind="photo.dcmttmst | date:'yyyy-MM-dd HH:mm:ss'"></td>
                                            <td>
                                                <button>
                                                    <i class="fa fa-remove"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="portlet light panel-collapse">
                                <div class="portlet-title">
                                    <div class="caption font-green-sharp">
                                        Action Log
                                    </div>
                                    <div class="tools">
                                        <a href="" class="collapse" data-original-title="" title=""> </a>
                                        <a href="" class="fullscreen" data-original-title="" title=""> </a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover tickets-table table-sortable">
                                        <thead>
                                        <tr>
                                            <td>Timestamp</td>
                                            <td>User</td>
                                            <td>Status</td>
                                            <td>Reason</td>
                                            <td>Due Date</td>
                                            <td>Comment</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="event in ticket.businessEvents">
                                            <td ng-bind="event.evnttmst | date:'yyyy-MM-dd HH:mm:ss'"></td>
                                            <td ng-bind="event.user.userId + ' - ' + event.user.username"></td>
                                            <td ng-bind="'tckt.status_' + event.busnstatnmbr | translate"></td>
                                            <td ng-bind="event.statusReason.clntstrsdscr"></td>
                                            <td ng-bind="event.busndueedate | date:'yyyy-MM-dd HH:mm"></td>
                                            <td ng-bind="event.evntcmnt"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="portlet light panel-collapse">
                                <div class="portlet-title">
                                    <div class="caption font-green-sharp">
                                        Action
                                    </div>
                                    <div class="tools">
                                        <a href="" class="collapse" data-original-title="" title=""> </a>
                                        <a href="" class="fullscreen" data-original-title="" title=""> </a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <div class="row">
                                        <textarea ng-model="ticket.comment" rows="6" cols="80"></textarea>
                                    </div>
                                    <div class="row">
                                        <select id="ticketAction" class="bs-select form-control" data-width="125px"
                                                ng-options="item.value as item.name for item in ticketActions"
                                                ng-model="ticket.action">
                                        </select>
                                    </div>
                                    <div class="row">
                                        <button ng-if="ticket != null" class="btn btn-primary" ng-click="save()">Save</button>
                                        <button ng-if="ticket != null" class="btn btn-primary" ng-click="save()">Update owner info</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <div class="portlet light panel-collapse">
                                <div class="portlet-title">
                                    <div class="caption font-green-sharp">
                                        Accounting Transactions
                                    </div>
                                    <div class="tools">
                                        <a href="" class="collapse" data-original-title="" title=""> </a>
                                        <a href="" class="fullscreen" data-original-title="" title=""> </a>
                                    </div>
                                </div>
                                <div class="portlet-body">
                                    <table class="table table-striped table-bordered table-hover tickets-table table-sortable">
                                        <thead>
                                        <tr>
                                            <td>Date</td>
                                            <td>User</td>
                                            <td>Amount</td>
                                            <td>Status</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="tx in ticket.accountTransactions">
                                            <td ng-bind="tx.trnsdate | date:'yyyy.MM.dd HH:mm:ss'"></td>
                                            <td ng-bind="tx.user.userId + ' - ' + tx.user.username"></td>
                                            <td style="text-align: left; float: left;">
                                                <ticket-field title="" apply="amount"></ticket-field>
                                            </td>
                                            <td ng-bind="'tckt.status_' + tx.busnstatnmbr | translate"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

            </div>
            <div class="tab-pane " id="tab_2">

            </div>
            <div class="tab-pane" id="tab_3">

            </div>
            <div class="tab-pane" id="tab_4">

            </div>
        </div>
    </div>


    <button ng-if="ticket != null" class="btn btn-primary" ng-click="save()">Save</button>
    <button ng-if="ticket == null" disabled="disabled" class="btn btn-primary" ng-click="save()">Save</button>

    <button class="btn btn-default" ng-click="back()">Back</button>

</div>
